name: devin_desktop_changelog

on:
  repository_dispatch:
    types: [desktop_release]

jobs:
  run:
    if: startsWith(github.event.client_payload.tag, 'desktop_v1')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/devin
        with:
          api_key: ${{ secrets.DEVIN_API_KEY }}
          prompt: Create new changelog entry for tag {{ tag }}, following guide at apps/web/content/changelog/AGENTS.md.
          vars: '{"tag": "${{ github.event.client_payload.tag }}"}'
